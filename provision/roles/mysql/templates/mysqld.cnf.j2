[mysqld]
## Charset
character-set-server       = {{ mysql_default_charset }}
collation-server           = {{ mysql_default_collation }}

## General
{% if mysql_cfg.mysqld.sql_mode is defined -%}
sql_mode                   = "{{ mysql_cfg.mysqld.sql_mode }}"
{% endif %}

## Network
{% if mysql_cfg.mysqld.max_connections is defined -%}
max_connections            = {{ mysql_cfg.mysqld.max_connections }}
{% endif %}
{% if mysql_cfg.mysqld.connect_timeout is defined -%}
connect_timeout            = {{ mysql_cfg.mysqld.connect_timeout }}
{% endif %}
{% if mysql_cfg.mysqld.max_allowed_packet is defined -%}
max_allowed_packet         = {{ mysql_cfg.mysqld.max_allowed_packet }}
{% endif %}
{% if mysql_cfg.mysqld.skip_name_resolve is defined -%}
skip_name_resolve
{% endif %}
{% if mysql_cfg.mysqld.interactive_timeout is defined -%}
interactive_timeout        = {{ mysql_cfg.mysqld.interactive_timeout }}
{% endif %}
{% if mysql_cfg.mysqld.wait_timeout is defined -%}
wait_timeout               = {{ mysql_cfg.mysqld.wait_timeout }}
{% endif %}

## Cache
query_cache_size           = {{ mysql_cfg.mysqld.query_cache_size }}
query_cache_type           = {{ mysql_cfg.mysqld.query_cache_type }}
{% if mysql_cfg.mysqld.table_open_cache is defined -%}
table_open_cache           = {{ mysql_cfg.mysqld.table_open_cache }}
{% endif %}
{% if mysql_cfg.mysqld.thread_cache_size is defined -%}
thread_cache_size          = {{ mysql_cfg.mysqld.thread_cache_size }}
{% endif %}
{% if mysql_cfg.mysqld.table_definition_cache is defined -%}
table_definition_cache     = {{ mysql_cfg.mysqld.table_definition_cache }}
{% endif %}

## Global Buffers(InnoDB)
innodb_buffer_pool_size    = {{ mysql_cfg.mysqld.innodb_buffer_pool_size}}
{% if mysql_cfg.mysqld.innodb_log_buffer_size is defined -%}
innodb_log_buffer_size     = {{ mysql_cfg.mysqld.innodb_log_buffer_size }}
{% endif %}

## Global Buffers(MyISAM)
key_buffer_size            = {{ mysql_cfg.mysqld.key_buffer_size }}

## Thread Buffers(InnoDB)
{% if mysql_cfg.mysqld.innodb_sort_buffer_size is defined -%}
innodb_sort_buffer_size    = {{ mysql_cfg.mysqld.innodb_sort_buffer_size }}
{% endif %}
{% if mysql_cfg.mysqld.join_buffer_size is defined -%}
join_buffer_size           = {{ mysql_cfg.mysqld.join_buffer_size }}
{% endif %}
{% if mysql_cfg.mysqld.read_buffer_size is defined -%}
read_buffer_size           = {{ mysql_cfg.mysqld.read_buffer_size }}
{% endif %}
{% if mysql_cfg.mysqld.read_rnd_buffer_size is defined -%}
read_rnd_buffer_size       = {{ mysql_cfg.mysqld.read_rnd_buffer_size }}
{% endif %}
{% if mysql_cfg.mysqld.sort_buffer_size is defined -%}
sort_buffer_size           = {{ mysql_cfg.mysqld.sort_buffer_size }}
{% endif %}

{% if mysql_cfg.mysqld.myisam_sort_buffer_size is defined -%}
## Thread Buffers(MyISAM)
myisam_sort_buffer_size    = {{ mysql_cfg.mysqld.myisam_sort_buffer_size }}
{% endif %}

## Temp Tables
{% if mysql_cfg.mysqld.max_heap_table_size is defined -%}
max_heap_table_size        = {{ mysql_cfg.mysqld.max_heap_table_size }}
{% endif %}
{% if mysql_cfg.mysqld.tmp_table_size is defined -%}
tmp_table_size             = {{ mysql_cfg.mysqld.tmp_table_size }}
{% endif %}

## Logging
{% if mysql_cfg.mysqld.general_log is defined -%}
general_log                = {{ '1' if mysql_cfg.mysqld.general_log else '0' }}
{% endif %}
{% if mysql_cfg.mysqld.general_log_file is defined -%}
general_log_file           = {{ mysql_cfg.mysqld.general_log_file }}
{% endif %}
{% if mysql_cfg.mysqld.slow_query_log is defined -%}
slow_query_log             = {{ '1' if mysql_cfg.mysqld.slow_query_log else '0' }}
{% endif %}
{% if mysql_cfg.mysqld.log_warnings is defined -%}
log_warnings               = {{ mysql_cfg.mysqld.log_warnings }}
{% endif %}
{% if mysql_cfg.mysqld.long_query_time is defined -%}
long_query_time            = {{ mysql_cfg.mysqld.long_query_time }}
{% endif %}
{% if mysql_cfg.mysqld.slow_query_log_file is defined -%}
slow_query_log_file        = {{ mysql_cfg.mysqld.slow_query_log_file }}
{% endif %}
{% if mysql_cfg.mysqld.extra_parameters is defined -%}
{{ mysql_cfg.mysqld.extra_parameters }}
{% endif %}
